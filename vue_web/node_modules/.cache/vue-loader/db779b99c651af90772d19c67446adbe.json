{"remainingRequest":"D:\\vue ui\\mint ui\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue ui\\mint ui\\vue_app_00\\src\\components\\xz\\cart.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"D:\\vue ui\\mint ui\\vue_app_00\\src\\components\\xz\\cart.vue","mtime":1564998616711},{"path":"D:\\vue ui\\mint ui\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\vue ui\\mint ui\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"D:\\vue ui\\mint ui\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vue ui\\mint ui\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"D:\\vue ui\\mint ui\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n\r\n.cart .cart_item .left{\r\n  display:flex;\r\n  justify-content: space-between;\r\n\r\n}\r\n\r\n.cart .cart_item{\r\n  display:flex;\r\n  justify-content: space-between;\r\n  border-bottom:1px solid #ddd;\r\n  padding:10px;\r\n}\r\n.cart .cart_item .left .name,\r\n.cart .cart_item .left .price{\r\n  height:54px;line-height:54px;\r\n}\r\n.cart .cart_item .left .price{color:#f00;}\r\n",{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cart.vue","sourceRoot":"src\\components\\xz","sourcesContent":["<template>\r\n  <div class=\"cart\">\r\n    <label><input type=\"checkbox\" @change=\"selectAll\" v-model=\"hh\">全选</label>\r\n    <div class=\"cart_item\" v-for=\"(item,i) of list\" :key=\"i\">\r\n      <div class=\"left\">\r\n        <input type=\"checkbox\" :data-id=\"item.id\" v-model=\"item.cb\">\r\n        <img :src=\"item.sm\">\r\n        <div class=\"name\">{{item.lname}}</div>        \r\n        <!-- 增删按钮 -->\r\n        <button @click=\"add\" :data-count=\"item.count\">-</button>\r\n          {{item.count}}\r\n        <button :data-count=\"item.count\" @click=\"add\">+</button>\r\n      </div>\r\n      <div class=\"price\">{{item.price}}</div>\r\n      <mt-button @click=\"delItem\" :data-id=\"item.id\">删除</mt-button>\r\n    </div>\r\n    <div>     \r\n       <!-- 将main.js中的store对象中的数据读取出来 -->\r\n      购物车中商品个数：{{$store.getters.getCartCount}}<br>\r\n      数量小计：<span></span>\r\n      <mt-button @click=\"delMore\" >删除选中商品</mt-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){return {\r\n    list:[],  \r\n    hh:false,\r\n  }},\r\n  computed:{},\r\n  methods:{\r\n    add(e){\r\n      var count=e.target.dataset.count;\r\n      console.log(count);\r\n    },\r\n    selectAll(e){\r\n      this.hh=e.target.checked\r\n      for(var item of this.list){\r\n        item.cb=this.hh;\r\n      }\r\n    },\r\n    loadMore(){//购物车列表\r\n      this.axios.get('cart').then(res=>{\r\n        console.log(res);\r\n        if(res.data.code==-1){\r\n            this.$messagebox(\"消息\",\"请先登录！\").then(res=>{\r\n            this.$router.push(\"/login\");\r\n            return;\r\n          })\r\n        }else{\r\n          this.list=res.data.data;\r\n          // 遍历前，用store对象中的clear()函数初始数量\r\n          this.$store.commit(\"clear\");\r\n          // 创建循环，遍历数组，为每个元素添加cb属性，来标注复选框的状态          \r\n          for(var item of this.list){\r\n            item.cb=false;\r\n            // 循环过程中使用store对象中的increment()函数，计算总数量\r\n            this.$store.commit(\"increment\");\r\n          }\r\n        }\r\n      }).catch(err=>{console.log(\"程序出错了！\")})\r\n    },\r\n    delItem(e){  //{params:obj}\r\n      var id=e.target.dataset.id;\r\n      var obj={id};      \r\n      this.$messagebox.confirm(\"是否删除指定商品\").then(res=>{\r\n        this.axios.get(\"del\",{params:obj}).then(res=>{\r\n          if(res.data.code==1){ //删除成功后， 重新加载购物车列表\r\n            // console.log(\"删除成功\");\r\n            this.loadMore();\r\n          }\r\n        })\r\n      }).catch(err=>{\r\n        // console.log(\"取消删除\");\r\n      })   \r\n    },\r\n    delMore(e){\r\n      var str=\"\";\r\n      for(var item of this.list){\r\n        if(item.cb){\r\n          str+=`${item.id},`;\r\n        } \r\n      }\r\n      str=str.substring(0,str.length-1);\r\n      var ids={str}; \r\n      this.$messagebox.confirm(\"是否删除选中的商品\").then(res=>{\r\n        this.axios.get('delMore',{params:ids}).then(res=>{\r\n          if(res.data.code==1){\r\n            this.loadMore();\r\n            this.$toast(\"删除成功\");\r\n          }\r\n        })\r\n      }).catch(err=>{this.loadMore()});      \r\n    },\r\n  },created(){//程序运行时自动加载\r\n    this.loadMore();\r\n  }\r\n}\r\n</script>\r\n<style>\r\n\r\n.cart .cart_item .left{\r\n  display:flex;\r\n  justify-content: space-between;\r\n\r\n}\r\n\r\n.cart .cart_item{\r\n  display:flex;\r\n  justify-content: space-between;\r\n  border-bottom:1px solid #ddd;\r\n  padding:10px;\r\n}\r\n.cart .cart_item .left .name,\r\n.cart .cart_item .left .price{\r\n  height:54px;line-height:54px;\r\n}\r\n.cart .cart_item .left .price{color:#f00;}\r\n</style>\r\n\r\n"]}]}